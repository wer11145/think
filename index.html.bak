<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小源的网页</title>
    <link rel="icon" href="icon.png" type="image/png">
    <link rel="shortcut icon" href="icon.png" type="image/png">
    
    <style>
        /* 全局变量定义 - 保留核心交互相关变量 */
        :root {
            --popup-default-width: 350px;
            --popup-default-height: 230px;
            --popup-min-width: 100px;
            --popup-min-height: 60px;
            --resize-edge-size: 1px;
            --img-placeholder-bg: #e3f2fd;
            
            /* 主题色变量 - 保留默认蓝色 */
            --theme-color: #0277bd;
            --theme-light: rgba(227, 242, 253, 0.5);
            --theme-opposite: #ff69b4;
        }
        
        /* 引入Minecraft字体（保留原风格） */
        @font-face {
            font-family: 'Minecraft';
            src: url('Minecraft.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        
        body {
            background-image: url("beijing.png"); /* 保留原背景图，可替换为自定义图片 */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            font-family: 'Minecraft', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* 弹窗基础样式 - 完全保留原交互相关样式 */
        .main-popup-detail {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: transparent;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 1;
            visibility: visible;
            pointer-events: none;
        }
        
        .main-popup-panel {
            background-color: rgba(255, 255, 255, 0.8);
            border: 1px solid #ccc;
            border-radius: 16px;
            width: var(--popup-default-width);
            height: var(--popup-default-height);
            min-width: var(--popup-min-width);
            min-height: var(--popup-min-height);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            transform: translateY(0);
            opacity: 1;
            position: absolute;
            pointer-events: auto;
            cursor: default;
        }
        
        /* 四边+四角缩放热区样式 */
        .window-resize-edge {
            position: absolute;
            z-index: 10;
            touch-action: none;
        }
        .window-resize-edge.left {
            left: 0;
            top: 0;
            height: 100%;
            width: var(--resize-edge-size);
            cursor: ew-resize;
        }
        .window-resize-edge.right {
            right: 0;
            top: 0;
            height: 100%;
            width: var(--resize-edge-size);
            cursor: ew-resize;
        }
        .window-resize-edge.top {
            left: 0;
            top: 0;
            width: 100%;
            height: var(--resize-edge-size);
            cursor: ns-resize;
        }
        .window-resize-edge.bottom {
            left: 0;
            bottom: 0;
            width: 100%;
            height: var(--resize-edge-size);
            cursor: ns-resize;
        }
        .window-resize-edge.corner-tl {
            left: 0;
            top: 0;
            width: var(--resize-edge-size);
            height: var(--resize-edge-size);
            cursor: nesw-resize;
        }
        .window-resize-edge.corner-tr {
            right: 0;
            top: 0;
            width: var(--resize-edge-size);
            height: var(--resize-edge-size);
            cursor: nwse-resize;
        }
        .window-resize-edge.corner-bl {
            left: 0;
            bottom: 0;
            width: var(--resize-edge-size);
            height: var(--resize-edge-size);
            cursor: nwse-resize;
        }
        .window-resize-edge.corner-br {
            right: 0;
            bottom: 0;
            width: var(--resize-edge-size);
            height: var(--resize-edge-size);
            cursor: nesw-resize;
        }
        
        /* 弹窗标题栏样式 */
        .panel-header {
            padding: 8px 16px;
            background-color: rgba(248, 249, 250, 0.8);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #eee;
            cursor: grab;
            user-select: none;
            touch-action: none;
            position: relative;
            z-index: 20;
        }
        .panel-header:active {
            cursor: grabbing;
        }
        .panel-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--theme-color);
        }
        .close-btn {
            width: 20px;
            height: 20px;
            cursor: pointer;
            position: relative;
            z-index: 2002;
        }
        .close-btn::before,
        .close-btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 14px;
            height: 2px;
            background-color: #000;
            transform: translate(-50%, -50%) rotate(45deg);
        }
        .close-btn::after {
            transform: translate(-50%, -50%) rotate(-45deg);
        }
        
        /* 弹窗内容区域样式 */
        .panel-content-wrapper {
            position: relative;
            width: 100%;
            height: calc(100% - 30px);
            overflow: auto;
            overflow-x: hidden;
        }
        .panel-content-wrapper::-webkit-scrollbar {
            width: 0;
            height: 0;
        }
        .panel-content {
            padding: 16px;
            background-color: var(--theme-light);
            min-height: 100%;
            box-sizing: border-box;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .popup-desc {
            font-size: 16px;
            color: #212121;
            margin: 0;
            line-height: 1.6;
        }
        
        /* 拖动/缩放时样式 */
        .panel-dragging {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }
        .panel-resizing {
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
        }
        /* 1-7选项按钮样式 */
.option-group {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* 3列布局，自动均分宽度 */
    gap: 12px; /* 按钮间距 */
    padding: 20px;
}
.option-btn {
    padding: 12px 0;
    border: none;
    border-radius: 8px;
    background-color: var(--theme-color);
    color: white;
    font-size: 18px;
    font-family: 'Minecraft', sans-serif;
    cursor: pointer;
    transition: transform 0.2s;
}
.option-btn:hover {
    transform: scale(1.05); /*  hover时轻微放大 */
}
/* 第7个按钮跨列居中（3列布局中占3列） */
.option-btn:nth-child(7) {
    grid-column: 1 / -1; /* 从第1列到最后1列 */
}
    </style>
</head>
<body>
    <!-- 主弹窗（默认显示） -->
    <div class="main-popup-detail" id="mainPopup">
        <div class="main-popup-panel" style="left: 50%; top: 50%; transform: translate(-50%, -50%);">
            <!-- 缩放热区 -->
            <div class="window-resize-edge left" onmousedown="startResize(event, this.parentElement, 'left')" ontouchstart="startResizeTouch(event, this.parentElement, 'left')"></div>
            <div class="window-resize-edge right" onmousedown="startResize(event, this.parentElement, 'right')" ontouchstart="startResizeTouch(event, this.parentElement, 'right')"></div>
            <div class="window-resize-edge top" onmousedown="startResize(event, this.parentElement, 'top')" ontouchstart="startResizeTouch(event, this.parentElement, 'top')"></div>
            <div class="window-resize-edge bottom" onmousedown="startResize(event, this.parentElement, 'bottom')" ontouchstart="startResizeTouch(event, this.parentElement, 'bottom')"></div>
            <div class="window-resize-edge corner-tl" onmousedown="startResize(event, this.parentElement, 'corner-tl')" ontouchstart="startResizeTouch(event, this.parentElement, 'corner-tl')"></div>
            <div class="window-resize-edge corner-tr" onmousedown="startResize(event, this.parentElement, 'corner-tr')" ontouchstart="startResizeTouch(event, this.parentElement, 'corner-tr')"></div>
            <div class="window-resize-edge corner-bl" onmousedown="startResize(event, this.parentElement, 'corner-bl')" ontouchstart="startResizeTouch(event, this.parentElement, 'corner-bl')"></div>
            <div class="window-resize-edge corner-br" onmousedown="startResize(event, this.parentElement, 'corner-br')" ontouchstart="startResizeTouch(event, this.parentElement, 'corner-br')"></div>
            
            <!-- 标题栏（可拖动） -->
            <div class="panel-header" onmousedown="startDrag(event, this.parentElement)" ontouchstart="startDragTouch(event, this.parentElement)">
                <div class="panel-title">更多工具</div>
                <div class="close-btn" onclick="hidePanel(document.getElementById('mainPopup'))"></div>
            </div>
            
            <!-- 弹窗内容 -->
            <div class="panel-content-wrapper">
                <div class="panel-content">
                
                
    
<button class="option-btn" onclick="openExternalLink('https://roar.iiilab.com/')">兽音译者</button>
        <button class="option-btn">2</button>
        <button class="option-btn">3</button>
        <button class="option-btn">4</button>
        <button class="option-btn">5</button>
        <button class="option-btn">6</button>
        <button class="option-btn">7</button>
    

                </div>
            </div>
        </div>
    </div>

    <script>
        // 基础交互变量
        let currentZIndex = 2001;
        
        // 拖动相关变量
        let isDragging = false;
        let dragTarget = null;
        let startX = 0;
        let startY = 0;
        let targetLeft = 0;
        let targetTop = 0;
        
        // 缩放相关变量
        let isResizing = false;
        let resizeTarget = null;
        let resizeType = '';
        let startWidth = 0;
        let startHeight = 0;
        let startLeft = 0;
        let startTop = 0;
        const minWidth = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--popup-min-width'));
        const minHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--popup-min-height'));
        
        // 初始化 - 绑定全局交互事件
        window.onload = function() {
            bindGlobalEvents();
        };
        
        // 绑定全局交互事件（拖动/缩放/点击）
        function bindGlobalEvents() {
            // 拖动事件
            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchmove', dragTouch, { passive: false });
            document.addEventListener('touchend', stopDrag);
            document.addEventListener('touchcancel', stopDrag);
            
            // 缩放事件
            document.addEventListener('mousemove', resize);
            document.addEventListener('mouseup', stopResize);
            document.addEventListener('touchmove', resizeTouch, { passive: false });
            document.addEventListener('touchend', stopResize);
            document.addEventListener('touchcancel', stopResize);
        }
        
        // 关闭弹窗
        function hidePanel(panelElement) {
            panelElement.style.opacity = 0;
            panelElement.style.visibility = 'hidden';
            setTimeout(() => {
                panelElement.remove();
            }, 300);
        }
        
        // 鼠标拖动开始
        function startDrag(event, target) {
            if (event.target.closest('.close-btn') || isResizing) return;
            isDragging = true;
            dragTarget = target;
            dragTarget.classList.add('panel-dragging');
            startX = event.clientX;
            startY = event.clientY;
            const rect = dragTarget.getBoundingClientRect();
            targetLeft = rect.left;
            targetTop = rect.top;
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 触摸拖动开始
        function startDragTouch(event, target) {
            if (event.target.closest('.close-btn') || isResizing) return;
            const touch = event.touches[0];
            isDragging = true;
            dragTarget = target;
            dragTarget.classList.add('panel-dragging');
            startX = touch.clientX;
            startY = touch.clientY;
            const rect = dragTarget.getBoundingClientRect();
            targetLeft = rect.left;
            targetTop = rect.top;
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 鼠标拖动中
        function drag(event) {
            if (!isDragging || !dragTarget) return;
            const offsetX = event.clientX - startX;
            const offsetY = event.clientY - startY;
            const newLeft = targetLeft + offsetX;
            const newTop = targetTop + offsetY;
            dragTarget.style.left = `${newLeft}px`;
            dragTarget.style.top = `${newTop}px`;
            dragTarget.style.transform = 'none'; // 取消居中transform，改为绝对定位
            event.stopPropagation();
        }
        
        // 触摸拖动中
        function dragTouch(event) {
            if (!isDragging || !dragTarget) return;
            const touch = event.touches[0];
            const offsetX = touch.clientX - startX;
            const offsetY = touch.clientY - startY;
            const newLeft = targetLeft + offsetX;
            const newTop = targetTop + offsetY;
            dragTarget.style.left = `${newLeft}px`;
            dragTarget.style.top = `${newTop}px`;
            dragTarget.style.transform = 'none';
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 停止拖动
        function stopDrag() {
            if (dragTarget) {
                dragTarget.classList.remove('panel-dragging');
            }
            isDragging = false;
            dragTarget = null;
        }
        
        // 鼠标缩放开始
        function startResize(event, target, type) {
            if (isDragging) return;
            isResizing = true;
            resizeTarget = target;
            resizeType = type;
            resizeTarget.classList.add('panel-resizing');
            const rect = resizeTarget.getBoundingClientRect();
            startWidth = rect.width;
            startHeight = rect.height;
            startLeft = rect.left;
            startTop = rect.top;
            startX = event.clientX;
            startY = event.clientY;
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 触摸缩放开始
        function startResizeTouch(event, target, type) {
            if (isDragging) return;
            const touch = event.touches[0];
            isResizing = true;
            resizeTarget = target;
            resizeType = type;
            resizeTarget.classList.add('panel-resizing');
            const rect = resizeTarget.getBoundingClientRect();
            startWidth = rect.width;
            startHeight = rect.height;
            startLeft = rect.left;
            startTop = rect.top;
            startX = touch.clientX;
            startY = touch.clientY;
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 鼠标缩放中
        function resize(event) {
            if (!isResizing || !resizeTarget) return;
            const offsetX = event.clientX - startX;
            const offsetY = event.clientY - startY;
            let newWidth = startWidth;
            let newHeight = startHeight;
            let newLeft = startLeft;
            let newTop = startTop;
            
            switch(resizeType) {
                case 'left':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newLeft = startLeft + offsetX;
                    break;
                case 'right':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    break;
                case 'top':
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newTop = startTop + offsetY;
                    break;
                case 'bottom':
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    break;
                case 'corner-tl':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newLeft = startLeft + offsetX;
                    newTop = startTop + offsetY;
                    break;
                case 'corner-tr':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newTop = startTop + offsetY;
                    break;
                case 'corner-bl':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    newLeft = startLeft + offsetX;
                    break;
                case 'corner-br':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    break;
            }
            
            resizeTarget.style.width = `${newWidth}px`;
            resizeTarget.style.height = `${newHeight}px`;
            resizeTarget.style.left = `${newLeft}px`;
            resizeTarget.style.top = `${newTop}px`;
            resizeTarget.style.transform = 'none';
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 触摸缩放中
        function resizeTouch(event) {
            if (!isResizing || !resizeTarget) return;
            const touch = event.touches[0];
            const offsetX = touch.clientX - startX;
            const offsetY = touch.clientY - startY;
            let newWidth = startWidth;
            let newHeight = startHeight;
            let newLeft = startLeft;
            let newTop = startTop;
            
            switch(resizeType) {
                case 'left':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newLeft = startLeft + offsetX;
                    break;
                case 'right':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    break;
                case 'top':
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newTop = startTop + offsetY;
                    break;
                case 'bottom':
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    break;
                case 'corner-tl':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newLeft = startLeft + offsetX;
                    newTop = startTop + offsetY;
                    break;
                case 'corner-tr':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    newHeight = Math.max(minHeight, startHeight - offsetY);
                    newTop = startTop + offsetY;
                    break;
                case 'corner-bl':
                    newWidth = Math.max(minWidth, startWidth - offsetX);
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    newLeft = startLeft + offsetX;
                    break;
                case 'corner-br':
                    newWidth = Math.max(minWidth, startWidth + offsetX);
                    newHeight = Math.max(minHeight, startHeight + offsetY);
                    break;
            }
            
            resizeTarget.style.width = `${newWidth}px`;
            resizeTarget.style.height = `${newHeight}px`;
            resizeTarget.style.left = `${newLeft}px`;
            resizeTarget.style.top = `${newTop}px`;
            resizeTarget.style.transform = 'none';
            event.stopPropagation();
            event.preventDefault();
        }
        
        // 停止缩放
        function stopResize() {
            if (resizeTarget) {
                resizeTarget.classList.remove('panel-resizing');
            }
            isResizing = false;
            resizeTarget = null;
            resizeType = '';
        }
    </script>
</body>
</html>
